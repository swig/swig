#######################################################################
# Makefile for guile test-suite (with SCM API)
#######################################################################

include ../guile/Makefile

# Overridden variables here
VARIANT      = _gh
# Refer to the guile directory for the run scripts
SCRIPTPREFIX = ../guile/
GUILE_RUNTIME=-runtime

# Custom tests - tests with additional commandline options
# none!

# Runs the testcase. A testcase is only run if
# a file is found which has _runme.scm appended after the testcase name.
run_testcase = \
	if [ -f $(srcdir)/$(SCRIPTPREFIX)$*$(SCRIPTSUFFIX) ]; then \
	  env LD_LIBRARY_PATH=.:$$LD_LIBRARY_PATH $(RUNTOOL) $(GUILE) -l $(srcdir)/$(SCRIPTPREFIX)$*$(SCRIPTSUFFIX); \
	fi

setup = \
	if [ -f $(srcdir)/$(SCRIPTPREFIX)$*$(SCRIPTSUFFIX) ]; then	  \
	  echo "$(ACTION)ing testcase $* (with run test) under $(LANGUAGE) (with GH API)" ; \
	else								  \
	  echo "$(ACTION)ing testcase $* under $(LANGUAGE) (with GH API)" ;		  \
	fi
