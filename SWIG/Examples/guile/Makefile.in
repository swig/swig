# Makefile for Guile.  Used by all of the example programs.

subdirs		= simple matrix port

top_srcdir	= @top_srcdir@
SWIG		= ../$(top_srcdir)/swig@release_suffix@
CC		= @CC@
CXX		= @CXX@
CFLAGS		= @CFLAGS@
GUILEINCLUDE	= @GUILEINCLUDE@
GUILELINK	= @GUILELINK@
SWIGOPT		= 

WRAP		= $(IFILE:.i=_wrap.c)

all:
	for d in $(subdirs) ; do (cd $$d ; $(MAKE)) ; done

clean::
	cd simple; make clean
	cd matrix; make clean
	cd port; make clean
	rm -f *~ .~*

# This is meant to be used w/ "make -f ../Makefile" from subdirs.
# Doesn't make sense to use it from here.

sub-all::
	$(SWIG) -guile $(SWIGOPT) $(IFILE)
	$(CC) $(CFLAGS) -o $(TARGET) $(SRCS) $(WRAP) $(GUILEINCLUDE) $(GUILELINK)

sub-all-cxx::
	$(SWIG) -c++ -guile $(SWIGOPT) $(IFILE)
	$(CXX) $(CFLAGS) -o $(TARGET) $(SRCS) $(WRAP) $(GUILEINCLUDE) $(GUILELINK)

# Makefile ends here
